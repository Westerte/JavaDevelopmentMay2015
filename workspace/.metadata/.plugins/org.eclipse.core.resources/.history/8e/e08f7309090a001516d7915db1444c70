package edu.nesterenko.parcer.logic;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import edu.nesterenko.parcer.entity.Component;
import edu.nesterenko.parcer.entity.Composite;
import edu.nesterenko.parcer.entity.Leaf;

public class TextFinder {
	public static List<String> findSentenceOrderedByWordCount(Parser parser) {
		Component root = parser.getHierarchy();
		Map<Component, Integer> sentenceWordCountMap = new HashMap<Component, Integer>();
		findSentencesOrderedByWordCount(root, sentenceWordCountMap);
		List<Map.Entry<Component, Integer>> entrySetList = new ArrayList<Map.Entry<Component, Integer>>(sentenceWordCountMap.entrySet());
		Comparator<Map.Entry<Component, Integer>> comp = 
				(Map.Entry<Component, Integer> o1, Map.Entry<Component, Integer> o2) 
				-> 
				o1.getValue() - o2.getValue();
		Collections.sort(entrySetList, comp);
		List<String> result = new ArrayList<String>();
		for(Map.Entry<Component, Integer> entry : entrySetList) {
			Component key = entry.getKey();
		}
		return null;		
	}
	private static void findSentencesOrderedByWordCount(Component father, Map<Component, Integer>  sentenceWordCountMap) {
		for(Component component : father) {
			if(component.getName() == "sentence"){
				sentenceWordCountMap.put(component, takeComponentsCountOfType("word", (Composite)component));
			}
			if(component instanceof Leaf) {
				
			}
			switch(component.getName()) {
			case "composite":
				findSentencesOrderedByWordCount(component, sentenceWordCountMap);
				break;
			case "leaf":
				break;
			}			
		}
	}
	private static int takeComponentsCountOfType(String name, Composite composite) {
		int result = 0;
		for(Component component : composite) {
			if(component.getName() == name) { 
				result++;
			}
		}
		return result;
	}
}
