package edu.nesterenko.airline.command;

import java.util.List;

import org.apache.log4j.Logger;

import edu.nesterenko.airline.bean.Request;
import edu.nesterenko.airline.bean.RequestEnum;
import edu.nesterenko.airline.bean.Response;
import edu.nesterenko.airline.bean.ResponseEnum;
import edu.vadimnesterenko.airline.entity.Airplane;
import edu.vadimnesterenko.airline.exception.LogicalException;
import edu.vadimnesterenko.airline.exception.PhisicalException;
import edu.vadimnesterenko.airline.logic.AirlineAirplainsFinder;

public class FindByFuelConsumptionCommand implements Command{
	private static FindByFuelConsumptionCommand instance;
	
	static {
		instance = new FindByFuelConsumptionCommand();
	}
	
	private FindByFuelConsumptionCommand() {}
	
	public static FindByFuelConsumptionCommand getInstance() {
		return instance;
	}
	
	@Override
	public Response processRequest(Request request) throws PhisicalException, LogicalException {
		Response response = new Response();
		try {
			int minRange = (int)request.getParameter(RequestEnum.MIN_RANGE);
			int maxRange = (int)request.getParameter(RequestEnum.MAX_RANGE);
			List<Airplane> airplanes = AirlineAirplainsFinder.findByFuelConsumption(minRange, maxRange);
			response.setParameter(ResponseEnum.AIRPLANES_LIST, airplanes);
		} catch (ClassCastException e) {
			throw new PhisicalException("minRange and maxRange must be int.");
		}			
		return response;
	}
}
